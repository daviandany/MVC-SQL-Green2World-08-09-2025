
import java.sql.*;
import java.util.ArrayList;


public class Campanha {
    private int idCampanhas;
    private String titulo;
    private String descricao;
    private Date dataInicio;
    private Date dataFim;


    public Campanha(int idCampanhas, String titulo, String descricao, Date dataInicio, Date dataFim) {
        this.idCampanhas = idCampanhas;
        this.titulo = titulo;
        this.descricao = descricao;
        this.dataInicio = dataInicio;
        this.dataFim = dataFim;
    }


    public static Campanha criarCampanha(Connection conn, String titulo, String descricao, Date dataInicio, Date dataFim) throws SQLException {
        String sql = "INSERT INTO campanhas (titulo, descricao, data_inicio, data_fim) VALUES (?, ?, ?, ?)";
        try (PreparedStatement stmt = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
            stmt.setString(1, titulo);
            stmt.setString(2, descricao);
            stmt.setDate(3, dataInicio);
            stmt.setDate(4, dataFim);
            stmt.executeUpdate();
            ResultSet rs = stmt.getGeneratedKeys();
            if (rs.next()) {
                return new Campanha(rs.getInt(1), titulo, descricao, dataInicio, dataFim);
            }
        }
        return null;
    }


    public static ArrayList<Campanha> listarCampanhas(Connection conn) throws SQLException {
        ArrayList<Campanha> campanhas = new ArrayList<>();
        String sql = "SELECT * FROM campanhas";
        try (Statement stmt = conn.createStatement(); ResultSet rs = stmt.executeQuery(sql)) {
            while (rs.next()) {
                campanhas.add(new Campanha(rs.getInt("id_campanhas"), rs.getString("titulo"), rs.getString("descricao"),
                        rs.getDate("data_inicio"), rs.getDate("data_fim")));
            }
        }
        return campanhas;


    }


    public int getIdCampanhas() { return idCampanhas; }
    public String getTitulo() { return titulo; }
    public String getDescricao() { return descricao; }
    public Date getDataInicio() { return dataInicio; }
    public Date getDataFim() { return dataFim; }
}




